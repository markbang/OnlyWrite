@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-body-family);
  --font-mono: var(--font-mono-family);
  --font-display: var(--font-display-family);
  --font-body: var(--font-body-family);
  --color-sidebar-ring: var(--sidebar-ring);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar: var(--sidebar);
  --color-selection-bg: var(--selection-bg);
  --color-selection-text: var(--selection-text);
  --color-highlight-primary: var(--highlight-primary);
  --color-highlight-secondary: var(--highlight-secondary);
  --color-hover-overlay: var(--hover-overlay);
  --color-active-overlay: var(--active-overlay);
  --color-syntax-heading: var(--syntax-heading);
  --color-syntax-strong: var(--syntax-strong);
  --color-syntax-emphasis: var(--syntax-emphasis);
  --color-syntax-code-bg: var(--syntax-code-bg);
  --color-syntax-code-text: var(--syntax-code-text);
  --color-syntax-blockquote-border: var(--syntax-blockquote-border);
  --color-syntax-blockquote-bg: var(--syntax-blockquote-bg);
  --color-syntax-link: var(--syntax-link);
  --color-syntax-link-hover: var(--syntax-link-hover);
  --color-syntax-keyword: var(--syntax-keyword);
  --color-syntax-string: var(--syntax-string);
  --color-syntax-number: var(--syntax-number);
  --color-syntax-comment: var(--syntax-comment);
  --color-syntax-function: var(--syntax-function);
  --color-syntax-variable: var(--syntax-variable);
  --color-syntax-operator: var(--syntax-operator);
  --color-syntax-punctuation: var(--syntax-punctuation);
  --color-syntax-tag: var(--syntax-tag);
  --color-syntax-attribute: var(--syntax-attribute);
  --color-syntax-value: var(--syntax-value);
  --color-code-block-bg: var(--code-block-bg);
  --color-code-block-border: var(--code-block-border);
  --color-code-block-header-bg: var(--code-block-header-bg);
  --color-code-block-header-text: var(--code-block-header-text);
  --color-chart-5: var(--chart-5);
  --color-chart-4: var(--chart-4);
  --color-chart-3: var(--chart-3);
  --color-chart-2: var(--chart-2);
  --color-chart-1: var(--chart-1);
  --color-ring: var(--ring);
  --color-input: var(--input);
  --color-border: var(--border);
  --color-destructive: var(--destructive);
  --color-accent-foreground: var(--accent-foreground);
  --color-accent: var(--accent);
  --color-muted-foreground: var(--muted-foreground);
  --color-muted: var(--muted);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-secondary: var(--secondary);
  --color-primary-foreground: var(--primary-foreground);
  --color-primary: var(--primary);
  --color-popover-foreground: var(--popover-foreground);
  --color-popover: var(--popover);
  --color-card-foreground: var(--card-foreground);
  --color-card: var(--card);
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --animate-accordion-down: accordion-down 0.2s ease-out;
  --animate-accordion-up: accordion-up 0.2s ease-out;

  @keyframes accordion-down {
    from {
      height: 0;
    }
    to {
      height: var(--radix-accordion-content-height);
    }
  }

  @keyframes accordion-up {
    from {
      height: var(--radix-accordion-content-height);
    }
    to {
      height: 0;
    }
  }
}

:root {
  --radius: 0px;
  --background: #ffffff;
  --foreground: #000000;
  --card: #ffffff;
  --card-foreground: #000000;
  --popover: #ffffff;
  --popover-foreground: #000000;
  --primary: #000000;
  --primary-foreground: #ffffff;
  --secondary: #ffffff;
  --secondary-foreground: #000000;
  --muted: #f5f5f5;
  --muted-foreground: #525252;
  --accent: #000000;
  --accent-foreground: #ffffff;
  --destructive: #000000;
  --border: #000000;
  --border-light: #e5e5e5;
  --input: #000000;
  --ring: #000000;
  --chart-1: #000000;
  --chart-2: #525252;
  --chart-3: #262626;
  --chart-4: #737373;
  --chart-5: #a3a3a3;
  --sidebar: #ffffff;
  --sidebar-foreground: #000000;
  --sidebar-primary: #000000;
  --sidebar-primary-foreground: #ffffff;
  --sidebar-accent: #000000;
  --sidebar-accent-foreground: #ffffff;
  --sidebar-border: #000000;
  --sidebar-ring: #000000;

  --selection-bg: #000000;
  --selection-text: #ffffff;
  --highlight-primary: #000000;
  --highlight-secondary: #f5f5f5;
  --hover-overlay: rgb(0 0 0 / 0.05);
  --active-overlay: rgb(0 0 0 / 0.1);

  --syntax-heading: #000000;
  --syntax-strong: #000000;
  --syntax-emphasis: #525252;
  --syntax-code-bg: #f5f5f5;
  --syntax-code-text: #000000;
  --syntax-blockquote-border: #000000;
  --syntax-blockquote-bg: #f5f5f5;
  --syntax-link: #000000;
  --syntax-link-hover: #000000;
  --syntax-keyword: #000000;
  --syntax-string: #000000;
  --syntax-number: #525252;
  --syntax-comment: #525252;
  --syntax-function: #000000;
  --syntax-variable: #000000;
  --syntax-operator: #525252;
  --syntax-punctuation: #525252;
  --syntax-tag: #000000;
  --syntax-attribute: #000000;
  --syntax-value: #000000;

  --code-block-bg: #f5f5f5;
  --code-block-border: #000000;
  --code-block-header-bg: #ffffff;
  --code-block-header-text: #000000;

  --spacing-xs: 0.25rem;
  --spacing-sm: 0.5rem;
  --spacing-md: 0.75rem;
  --spacing-lg: 1rem;
  --spacing-xl: 1.5rem;
  --spacing-2xl: 2rem;
  --spacing-3xl: 3rem;

  --shadow-subtle: none;
  --shadow-soft: none;
  --shadow-medium: none;
  --shadow-strong: none;

  --border-subtle: #e5e5e5;
  --border-soft: #e5e5e5;
  --border-medium: #000000;
  --border-strong: #000000;

  --focus-ring: #000000;
  --focus-ring-offset: #ffffff;
  --error-text: #000000;
  --success-text: #000000;
  --warning-text: #525252;
  --info-text: #525252;

  --high-contrast-text: #000000;
  --high-contrast-bg: #ffffff;
  --high-contrast-border: #000000;

  --texture-ink: #000000;
  --texture-ink-subtle: #00000008;
  --texture-ink-faint: #00000005;
  --texture-lines: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 1px,
    var(--texture-ink) 1px,
    var(--texture-ink) 2px
  );
  --texture-grid:
    linear-gradient(var(--texture-ink-subtle) 1px, transparent 1px),
    linear-gradient(90deg, var(--texture-ink-subtle) 1px, transparent 1px);
  --texture-diagonal: repeating-linear-gradient(
    45deg,
    transparent,
    transparent 40px,
    var(--texture-ink-subtle) 40px,
    var(--texture-ink-subtle) 42px
  );
  --texture-vertical: repeating-linear-gradient(
    90deg,
    transparent,
    transparent 1px,
    var(--texture-ink) 1px,
    var(--texture-ink) 2px
  );
  --texture-radial: radial-gradient(
    circle at top center,
    var(--texture-ink),
    transparent 70%
  );
  --texture-noise: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
}

.dark {
  --background: #000000;
  --foreground: #ffffff;
  --card: #000000;
  --card-foreground: #ffffff;
  --popover: #000000;
  --popover-foreground: #ffffff;
  --primary: #ffffff;
  --primary-foreground: #000000;
  --secondary: #000000;
  --secondary-foreground: #ffffff;
  --muted: #0f0f0f;
  --muted-foreground: #b3b3b3;
  --accent: #ffffff;
  --accent-foreground: #000000;
  --destructive: #ffffff;
  --border: #ffffff;
  --border-light: #262626;
  --input: #ffffff;
  --ring: #ffffff;
  --chart-1: #ffffff;
  --chart-2: #b3b3b3;
  --chart-3: #737373;
  --chart-4: #d4d4d4;
  --chart-5: #525252;
  --sidebar: #000000;
  --sidebar-foreground: #ffffff;
  --sidebar-primary: #ffffff;
  --sidebar-primary-foreground: #000000;
  --sidebar-accent: #ffffff;
  --sidebar-accent-foreground: #000000;
  --sidebar-border: #ffffff;
  --sidebar-ring: #ffffff;

  --selection-bg: #ffffff;
  --selection-text: #000000;
  --highlight-primary: #ffffff;
  --highlight-secondary: #0f0f0f;
  --hover-overlay: rgb(255 255 255 / 0.06);
  --active-overlay: rgb(255 255 255 / 0.12);

  --syntax-heading: #ffffff;
  --syntax-strong: #ffffff;
  --syntax-emphasis: #b3b3b3;
  --syntax-code-bg: #0f0f0f;
  --syntax-code-text: #ffffff;
  --syntax-blockquote-border: #ffffff;
  --syntax-blockquote-bg: #0f0f0f;
  --syntax-link: #ffffff;
  --syntax-link-hover: #ffffff;
  --syntax-keyword: #ffffff;
  --syntax-string: #ffffff;
  --syntax-number: #b3b3b3;
  --syntax-comment: #b3b3b3;
  --syntax-function: #ffffff;
  --syntax-variable: #ffffff;
  --syntax-operator: #b3b3b3;
  --syntax-punctuation: #b3b3b3;
  --syntax-tag: #ffffff;
  --syntax-attribute: #ffffff;
  --syntax-value: #ffffff;

  --code-block-bg: #0f0f0f;
  --code-block-border: #ffffff;
  --code-block-header-bg: #000000;
  --code-block-header-text: #ffffff;

  --shadow-subtle: none;
  --shadow-soft: none;
  --shadow-medium: none;
  --shadow-strong: none;

  --border-subtle: #262626;
  --border-soft: #262626;
  --border-medium: #ffffff;
  --border-strong: #ffffff;

  --focus-ring: #ffffff;
  --focus-ring-offset: #000000;
  --error-text: #ffffff;
  --success-text: #ffffff;
  --warning-text: #b3b3b3;
  --info-text: #b3b3b3;

  --high-contrast-text: #ffffff;
  --high-contrast-bg: #000000;
  --high-contrast-border: #ffffff;

  --texture-ink: #ffffff;
  --texture-ink-subtle: #ffffff08;
  --texture-ink-faint: #ffffff05;
}

@layer base {
  * {
    @apply border-border outline-ring/50;
    border-radius: 0 !important;
    box-shadow: none !important;
  }
  
  /* Accessibility improvements for screen readers */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }
  
  /* Visually hidden but available to screen readers */
  .visually-hidden {
    position: absolute !important;
    width: 1px !important;
    height: 1px !important;
    padding: 0 !important;
    margin: -1px !important;
    overflow: hidden !important;
    clip: rect(0, 0, 0, 0) !important;
    white-space: nowrap !important;
    border: 0 !important;
  }
  
  /* High contrast mode support */
  @media (prefers-contrast: high) {
    :root {
      --background: var(--high-contrast-bg);
      --foreground: var(--high-contrast-text);
      --border: var(--high-contrast-border);
      --ring: var(--high-contrast-text);
    }
    
    .dark {
      --background: var(--high-contrast-bg);
      --foreground: var(--high-contrast-text);
      --border: var(--high-contrast-border);
      --ring: var(--high-contrast-text);
    }
  }
  
  /* Reduced motion support for accessibility */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
    
    /* Disable hover animations for reduced motion */
    button:hover,
    [role="button"]:hover,
    a[href]:hover,
    .file-list-item:hover {
      transform: none !important;
    }
  }
  
  /* Global theme transition optimization with performance improvements */
  *,
  *::before,
  *::after {
    transition-property: color, background-color, border-color, text-decoration-color, fill, stroke;
    transition-timing-function: linear;
    transition-duration: 100ms;
  }
  
  /* Optimized transition classes for consistent timing and better performance */
  .transition-theme {
    transition: color 100ms linear, 
                background-color 100ms linear, 
                border-color 100ms linear;
  }
  
  .transition-fast {
    transition: color 100ms linear, 
                background-color 100ms linear, 
                border-color 100ms linear;
  }
  
  .transition-smooth {
    transition: color 100ms linear, 
                background-color 100ms linear, 
                border-color 100ms linear;
  }
  
  /* Performance optimization: reduce paint operations */
  .will-change-transform {
    will-change: transform;
  }
  
  .will-change-colors {
    will-change: color, background-color, border-color;
  }
  
  /* Prevent transitions on page load */
  .preload * {
    transition: none !important;
  }
  
  body {
    @apply bg-background text-foreground;
    font-family: var(--font-body);
    background-image: var(--texture-lines), var(--texture-noise);
    background-size: 100% 4px, 256px 256px;
    background-attachment: fixed;
    transition: background-color 100ms linear, color 100ms linear;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-family: var(--font-display);
    letter-spacing: -0.02em;
  }
  
  /* Root element transitions for theme switching */
  html {
    transition: background-color 100ms linear;
  }
  
  /* Enhanced interaction states for all interactive elements */
  button, 
  [role="button"], 
  input[type="button"], 
  input[type="submit"], 
  input[type="reset"],
  a[href],
  [tabindex]:not([tabindex="-1"]),
  [data-slot="sidebar-menu-button"],
  [data-slot="dropdown-menu-item"] {
    transition: 
      color 100ms linear,
      background-color 100ms linear,
      border-color 100ms linear;
  }
  
  /* Keyboard navigation improvements */
  [tabindex]:not([tabindex="-1"]) {
    position: relative;
  }
  
  /* Enhanced focus management for complex components */
  [role="menu"] [role="menuitem"]:focus,
  [role="listbox"] [role="option"]:focus,
  [role="tree"] [role="treeitem"]:focus,
  [role="grid"] [role="gridcell"]:focus,
  [role="tablist"] [role="tab"]:focus {
    outline: 3px solid var(--focus-ring);
    outline-offset: 3px;
    background-color: var(--foreground);
    color: var(--background);
    z-index: 1;
  }
  
  /* Improved focus indicators for form elements */
  input:focus-visible,
  textarea:focus-visible,
  select:focus-visible {
    outline: none;
    border-color: var(--foreground);
    border-width: 4px;
    box-shadow: none;
  }
  
  /* Focus trap styling for modals and dialogs */
  [role="dialog"]:focus-within,
  [role="alertdialog"]:focus-within {
    outline: none;
  }
  
  /* Ensure focus is visible on all interactive elements */
  /* Enhanced focus states for accessibility compliance */
  button:focus-visible,
  [role="button"]:focus-visible,
  a:focus-visible,
  [data-slot="sidebar-menu-button"]:focus-visible,
  [data-slot="sidebar-menu-action"]:focus-visible,
  [data-slot="sidebar-menu-sub-button"]:focus-visible,
  [data-slot="dropdown-menu-item"]:focus-visible,
  [tabindex]:not([tabindex="-1"]):focus-visible {
    outline: 3px solid var(--ring);
    outline-offset: 3px;
    box-shadow: none;
    transition: 
      outline-color 100ms linear;
  }
  
  /* High contrast focus for better visibility */
  @media (prefers-contrast: high) {
    button:focus-visible,
    [role="button"]:focus-visible,
    a:focus-visible,
    [data-slot="sidebar-menu-button"]:focus-visible,
    [data-slot="sidebar-menu-action"]:focus-visible,
    [data-slot="sidebar-menu-sub-button"]:focus-visible,
    [data-slot="dropdown-menu-item"]:focus-visible,
    [tabindex]:not([tabindex="-1"]):focus-visible {
      outline: 4px solid var(--foreground);
      outline-offset: 4px;
      box-shadow: none;
    }
  }
  
  /* Skip to content link for keyboard navigation */
  .skip-to-content {
    position: absolute;
    top: -40px;
    left: 6px;
    background: var(--foreground);
    color: var(--background);
    border: 2px solid var(--foreground);
    padding: 8px 16px;
    text-decoration: none;
    z-index: 1000;
    font-family: var(--font-mono);
    font-weight: 600;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    transition: top 100ms linear;
  }
  
  .skip-to-content:focus {
    top: 6px;
  }
  
  /* Input and form element transitions */
  input,
  textarea,
  select {
    transition: 
      color 100ms linear,
      background-color 100ms linear,
      border-color 100ms linear;
  }
  
  /* Optimized hover states for better performance */
  button:not(:disabled):hover,
  [role="button"]:not([aria-disabled="true"]):hover,
  a[href]:hover {
    transform: none;
    box-shadow: none;
  }
  
  button:not(:disabled):active,
  [role="button"]:not([aria-disabled="true"]):active,
  a[href]:active {
    transform: none;
    box-shadow: none;
  }
  
  /* Optimized file list item transitions */
  .file-list-item {
    transition: color 100ms linear, background-color 100ms linear, border-color 100ms linear;
  }
  
  .file-list-item:hover {
    transform: none;
    box-shadow: none;
  }
  
  .file-list-item:active {
    transform: none;
    box-shadow: none;
  }
  
  /* Optimized interface section styling */
  .interface-section {
    border: 1px solid var(--border);
    transition: color 100ms linear, 
                background-color 100ms linear, 
                border-color 100ms linear;
  }
  
  .interface-section:hover {
    border-color: var(--border);
    box-shadow: none;
  }
  
  .interface-section-header {
    border-bottom: 1px solid var(--border);
    background: var(--background);
    padding: var(--spacing-md) var(--spacing-lg);
    transition: color 100ms linear, 
                background-color 100ms linear, 
                border-color 100ms linear;
  }
  
  .interface-section-content {
    padding: var(--spacing-lg);
    transition: color 100ms linear, 
                background-color 100ms linear, 
                border-color 100ms linear;
  }
  
  /* Consistent spacing utilities */
  .spacing-xs { gap: var(--spacing-xs); }
  .spacing-sm { gap: var(--spacing-sm); }
  .spacing-md { gap: var(--spacing-md); }
  .spacing-lg { gap: var(--spacing-lg); }
  .spacing-xl { gap: var(--spacing-xl); }
  .spacing-2xl { gap: var(--spacing-2xl); }
  .spacing-3xl { gap: var(--spacing-3xl); }
  
  .padding-xs { padding: var(--spacing-xs); }
  .padding-sm { padding: var(--spacing-sm); }
  .padding-md { padding: var(--spacing-md); }
  .padding-lg { padding: var(--spacing-lg); }
  .padding-xl { padding: var(--spacing-xl); }
  .padding-2xl { padding: var(--spacing-2xl); }
  .padding-3xl { padding: var(--spacing-3xl); }
  
  .margin-xs { margin: var(--spacing-xs); }
  .margin-sm { margin: var(--spacing-sm); }
  .margin-md { margin: var(--spacing-md); }
  .margin-lg { margin: var(--spacing-lg); }
  .margin-xl { margin: var(--spacing-xl); }
  .margin-2xl { margin: var(--spacing-2xl); }
  .margin-3xl { margin: var(--spacing-3xl); }
  
  /* Global text selection styling with utility classes for testing */
  ::selection {
    background-color: var(--selection-bg);
    color: var(--selection-text);
  }
  
  ::-moz-selection {
    background-color: var(--selection-bg);
    color: var(--selection-text);
  }
  
  /* Selection utility classes for component consistency */
  .selection-primary {
    @apply selection:bg-primary/20 selection:text-primary-foreground;
  }
  
  .selection-theme {
    @apply selection:bg-selection-bg selection:text-selection-text;
  }
  
  /* Enhanced selection styling for specific elements */
  input::selection,
  textarea::selection,
  [contenteditable]::selection {
    background-color: var(--selection-bg);
    color: var(--selection-text);
  }
  
  input::-moz-selection,
  textarea::-moz-selection,
  [contenteditable]::-moz-selection {
    background-color: var(--selection-bg);
    color: var(--selection-text);
  }
  
  /* Code block selection styling */
  code::selection,
  pre::selection {
    background-color: var(--selection-bg);
    color: var(--selection-text);
  }
  
  code::-moz-selection,
  pre::-moz-selection {
    background-color: var(--selection-bg);
    color: var(--selection-text);
  }
  
  /* Button and interactive element selection */
  button::selection,
  a::selection {
    background-color: var(--selection-bg);
    color: var(--selection-text);
  }
  
  button::-moz-selection,
  a::-moz-selection {
    background-color: var(--selection-bg);
    color: var(--selection-text);
  }
  
  /* Prose content selection (for markdown editor) */
  .prose ::selection {
    background-color: var(--selection-bg);
    color: var(--selection-text);
  }
  
  .prose ::-moz-selection {
    background-color: var(--selection-bg);
    color: var(--selection-text);
  }
  
  /* Sidebar and navigation selection */
  .sidebar ::selection,
  nav ::selection {
    background-color: var(--selection-bg);
    color: var(--selection-text);
  }
  
  .sidebar ::-moz-selection,
  nav ::-moz-selection {
    background-color: var(--selection-bg);
    color: var(--selection-text);
  }
  
  /* File area and list selection */
  .file-area ::selection,
  ul ::selection,
  li ::selection {
    background-color: var(--selection-bg);
    color: var(--selection-text);
  }
  
  .file-area ::-moz-selection,
  ul ::-moz-selection,
  li ::-moz-selection {
    background-color: var(--selection-bg);
    color: var(--selection-text);
  }
  
  /* Table selection */
  table ::selection,
  th ::selection,
  td ::selection {
    background-color: var(--selection-bg);
    color: var(--selection-text);
  }
  
  table ::-moz-selection,
  th ::-moz-selection,
  td ::-moz-selection {
    background-color: var(--selection-bg);
    color: var(--selection-text);
  }
  
  /* Optimized prose styling with consistent theme integration */
  .prose {
    --tw-prose-body: var(--foreground);
    --tw-prose-headings: var(--syntax-heading);
    --tw-prose-lead: var(--muted-foreground);
    --tw-prose-links: var(--syntax-link);
    --tw-prose-bold: var(--syntax-strong);
    --tw-prose-counters: var(--muted-foreground);
    --tw-prose-bullets: var(--muted-foreground);
    --tw-prose-hr: var(--border);
    --tw-prose-quotes: var(--syntax-emphasis);
    --tw-prose-quote-borders: var(--syntax-blockquote-border);
    --tw-prose-captions: var(--muted-foreground);
    --tw-prose-code: var(--syntax-code-text);
    --tw-prose-pre-code: var(--syntax-code-text);
    --tw-prose-pre-bg: var(--code-block-bg);
    --tw-prose-th-borders: var(--border);
    --tw-prose-td-borders: var(--border-subtle);
  }
  
  /* Optimized code block styling */
  .prose pre {
    background-color: var(--code-block-bg) !important;
    border: 1px solid var(--code-block-border);
    padding: 1rem;
    margin: 1.5rem 0;
    overflow-x: auto;
    position: relative;
    box-shadow: var(--shadow-subtle);
    transition: color 100ms linear, 
                background-color 100ms linear, 
                border-color 100ms linear;
  }
  
  .prose pre:hover {
    box-shadow: none;
    border-color: var(--border);
  }
  
  .prose pre code {
    background-color: transparent !important;
    padding: 0 !important;
    border-radius: 0 !important;
    font-size: 0.875rem;
    line-height: 1.5;
    color: var(--syntax-code-text);
  }
  
  /* Optimized inline code styling */
  .prose code:not(pre code) {
    background-color: var(--syntax-code-bg) !important;
    color: var(--syntax-code-text) !important;
    padding: 0.125rem 0.375rem;
    font-size: 0.875em;
    font-weight: 500;
    border: 1px solid var(--border);
    transition: color 100ms linear, 
                background-color 100ms linear, 
                border-color 100ms linear;
  }
  
  .prose code:not(pre code):hover {
    background-color: var(--foreground);
    color: var(--background) !important;
    border-color: var(--foreground);
  }
  
  /* Code block language label */
  .prose pre[data-language]::before {
    content: attr(data-language);
    position: absolute;
    top: 0;
    right: 0;
    background-color: var(--code-block-header-bg);
    color: var(--code-block-header-text);
    padding: 0.25rem 0.75rem;
    font-size: 0.75rem;
    font-weight: 500;
    border-bottom-left-radius: 0.25rem;
    border-top-right-radius: 0.5rem;
    border-left: 1px solid var(--code-block-border);
    border-bottom: 1px solid var(--code-block-border);
    text-transform: uppercase;
    letter-spacing: 0.05em;
  }
  
  /* Optimized syntax highlighting for common tokens */
  .prose .token.keyword,
  .prose .token.control,
  .prose .token.directive,
  .prose .token.important {
    color: var(--syntax-keyword);
    font-weight: 600;
  }
  
  .prose .token.string,
  .prose .token.char,
  .prose .token.attr-value {
    color: var(--syntax-string);
  }
  
  .prose .token.number {
    color: var(--syntax-number);
    font-weight: 500;
  }
  
  .prose .token.comment,
  .prose .token.prolog,
  .prose .token.doctype,
  .prose .token.cdata {
    color: var(--syntax-comment);
    font-style: italic;
  }
  
  .prose .token.function {
    color: var(--syntax-function);
    font-weight: 500;
  }
  
  .prose .token.variable {
    color: var(--syntax-variable);
  }
  
  .prose .token.operator {
    color: var(--syntax-operator);
  }
  
  .prose .token.punctuation {
    color: var(--syntax-punctuation);
  }
  
  .prose .token.tag {
    color: var(--syntax-tag);
    font-weight: 500;
  }
  
  .prose .token.attr-name {
    color: var(--syntax-attribute);
  }
  }
  
  .prose .token.string,
  .prose .token.char,
  .prose .token.attr-value,
  .prose .token.regex {
    color: var(--syntax-string);
  }
  
  .prose .token.number,
  .prose .token.boolean,
  .prose .token.constant {
    color: var(--syntax-number);
    font-weight: 500;
  }
  
  .prose .token.comment,
  .prose .token.prolog,
  .prose .token.doctype,
  .prose .token.cdata {
    color: var(--syntax-comment);
    font-style: italic;
  }
  
  .prose .token.function,
  .prose .token.method,
  .prose .token.class-name {
    color: var(--syntax-function);
    font-weight: 500;
  }
  
  .prose .token.variable,
  .prose .token.parameter {
    color: var(--syntax-variable);
  }
  
  .prose .token.operator,
  .prose .token.entity,
  .prose .token.url {
    color: var(--syntax-operator);
  }
  
  .prose .token.punctuation,
  .prose .token.symbol {
    color: var(--syntax-punctuation);
  }
  
  .prose .token.tag,
  .prose .token.selector {
    color: var(--syntax-tag);
    font-weight: 500;
  }
  
  .prose .token.attr-name,
  .prose .token.property {
    color: var(--syntax-attribute);
  }
  
  .prose .token.inserted {
    color: var(--syntax-string);
    background-color: oklch(from var(--syntax-string) l c h / 0.1);
  }
  
  .prose .token.deleted {
    color: var(--syntax-number);
    background-color: oklch(from var(--syntax-number) l c h / 0.1);
  }
  
  /* Enhanced blockquote styling with optimized transitions */
  .prose blockquote {
    background-color: var(--syntax-blockquote-bg);
    border-left: 4px solid var(--syntax-blockquote-border);
    padding: 1rem 1.5rem;
    margin: 1.5rem 0;
    position: relative;
    transition: 
      background-color 100ms linear,
      border-color 100ms linear,
      border-width 100ms linear;
  }
  
  .prose blockquote:hover {
    background-color: var(--syntax-blockquote-bg);
    border-left-color: var(--syntax-blockquote-border);
    border-left-width: 6px;
  }
  
  .prose blockquote p {
    margin: 0;
    color: var(--syntax-emphasis);
    font-style: italic;
  }
  
  /* Enhanced link styling with optimized transitions */
  .prose a {
    color: var(--syntax-link);
    text-decoration: underline;
    text-decoration-color: oklch(from var(--syntax-link) l c h / 0.3);
    text-underline-offset: 0.125em;
    transition: 
      color 100ms linear,
      text-decoration-color 100ms linear,
      text-underline-offset 100ms linear;
  }
  
  .prose a:hover {
    color: var(--syntax-link-hover);
    text-decoration-color: var(--syntax-link-hover);
    text-underline-offset: 0.25em;
    transition: 
      color 100ms linear,
      text-decoration-color 100ms linear,
      text-underline-offset 100ms linear;
  }
  
  /* Enhanced heading styling with optimized transitions */
  .prose h1, .prose h2, .prose h3, .prose h4, .prose h5, .prose h6 {
    color: var(--syntax-heading);
    font-weight: 700;
    letter-spacing: -0.025em;
    transition: 
      color 200ms cubic-bezier(0.4, 0, 0.2, 1),
      border-color 200ms cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .prose h1 {
    border-bottom: 2px solid var(--border-soft);
    padding-bottom: 0.5rem;
  }
  
  .prose h2 {
    border-bottom: 1px solid var(--border-subtle);
    padding-bottom: 0.25rem;
  }
  
  /* Enhanced list styling */
  .prose ul, .prose ol {
    padding-left: 1.5rem;
  }
  
  .prose li {
    margin: 0.5rem 0;
  }
  
  .prose li::marker {
    color: var(--muted-foreground);
  }
  
  /* Enhanced table styling with optimized transitions */
  .prose table {
    border-collapse: collapse;
    border: 1px solid var(--border);
    border-radius: 0.5rem;
    overflow: hidden;
    box-shadow: var(--shadow-subtle);
    transition: 
      border-color 200ms cubic-bezier(0.4, 0, 0.2, 1),
      box-shadow 200ms cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .prose th {
    background-color: var(--muted);
    color: var(--foreground);
    font-weight: 600;
    padding: 0.75rem 1rem;
    border-bottom: 2px solid var(--border);
    transition: 
      background-color 200ms cubic-bezier(0.4, 0, 0.2, 1),
      color 200ms cubic-bezier(0.4, 0, 0.2, 1),
      border-color 200ms cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .prose td {
    padding: 0.75rem 1rem;
    border-bottom: 1px solid var(--border-subtle);
    transition: 
      background-color 150ms cubic-bezier(0.4, 0, 0.2, 1),
      color 200ms cubic-bezier(0.4, 0, 0.2, 1),
      border-color 200ms cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  .prose tr:hover {
    background-color: var(--accent);
    transition: background-color 100ms cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Additional transition optimizations for theme switching */
  
  /* Prevent layout shift during theme transitions */
  html.dark,
  html.light {
    transition: background-color 200ms cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  /* Optimize sidebar transitions */
  [data-sidebar] {
    transition: 
      background-color 200ms cubic-bezier(0.4, 0, 0.2, 1),
      border-color 200ms cubic-bezier(0.4, 0, 0.2, 1),
      color 200ms cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  /* Optimize navigation element transitions */
  nav,
  nav * {
    transition: 
      color 200ms cubic-bezier(0.4, 0, 0.2, 1),
      background-color 200ms cubic-bezier(0.4, 0, 0.2, 1),
      border-color 200ms cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  /* Optimize card and panel transitions */
  [class*="card"],
  [class*="panel"],
  [class*="dialog"],
  [class*="popover"] {
    transition: 
      background-color 200ms cubic-bezier(0.4, 0, 0.2, 1),
      border-color 200ms cubic-bezier(0.4, 0, 0.2, 1),
      box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  /* Optimize dropdown and menu transitions */
  [role="menu"],
  [role="menuitem"],
  [data-radix-collection-item] {
    transition: 
      color 150ms cubic-bezier(0.4, 0, 0.2, 1),
      background-color 150ms cubic-bezier(0.4, 0, 0.2, 1),
      transform 100ms cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  /* Optimize tooltip transitions */
  [role="tooltip"] {
    transition: 
      opacity 150ms cubic-bezier(0.4, 0, 0.2, 1),
      transform 150ms cubic-bezier(0.4, 0, 0.2, 1),
      background-color 200ms cubic-bezier(0.4, 0, 0.2, 1),
      color 200ms cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  /* Optimize badge and tag transitions */
  [class*="badge"],
  [class*="tag"] {
    transition: 
      color 150ms cubic-bezier(0.4, 0, 0.2, 1),
      background-color 150ms cubic-bezier(0.4, 0, 0.2, 1),
      border-color 150ms cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  /* Optimize progress and loading element transitions */
  [class*="progress"],
  [class*="loading"],
  [class*="spinner"] {
    transition: 
      color 200ms cubic-bezier(0.4, 0, 0.2, 1),
      background-color 200ms cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  /* Optimize alert and notification transitions */
  [role="alert"],
  [class*="alert"],
  [class*="notification"] {
    transition: 
      color 200ms cubic-bezier(0.4, 0, 0.2, 1),
      background-color 200ms cubic-bezier(0.4, 0, 0.2, 1),
      border-color 200ms cubic-bezier(0.4, 0, 0.2, 1),
      opacity 150ms cubic-bezier(0.4, 0, 0.2, 1),
      transform 150ms cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  /* Optimize switch and checkbox transitions */
  [role="switch"],
  [type="checkbox"],
  [type="radio"] {
    transition: 
      background-color 150ms cubic-bezier(0.4, 0, 0.2, 1),
      border-color 150ms cubic-bezier(0.4, 0, 0.2, 1),
      transform 100ms cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  /* Optimize slider and range input transitions */
  [type="range"],
  [class*="slider"] {
    transition: 
      background-color 200ms cubic-bezier(0.4, 0, 0.2, 1),
      border-color 200ms cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  /* Optimize tab transitions */
  [role="tab"],
  [role="tabpanel"] {
    transition: 
      color 150ms cubic-bezier(0.4, 0, 0.2, 1),
      background-color 150ms cubic-bezier(0.4, 0, 0.2, 1),
      border-color 150ms cubic-bezier(0.4, 0, 0.2, 1),
      opacity 200ms cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  /* Optimize accordion transitions */
  [data-radix-accordion-item],
  [data-radix-accordion-trigger],
  [data-radix-accordion-content] {
    transition: 
      color 200ms cubic-bezier(0.4, 0, 0.2, 1),
      background-color 200ms cubic-bezier(0.4, 0, 0.2, 1),
      border-color 200ms cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  /* Optimize collapsible transitions */
  [data-radix-collapsible-root],
  [data-radix-collapsible-trigger],
  [data-radix-collapsible-content] {
    transition: 
      color 200ms cubic-bezier(0.4, 0, 0.2, 1),
      background-color 200ms cubic-bezier(0.4, 0, 0.2, 1),
      border-color 200ms cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  /* Optimize separator transitions */
  [data-orientation="horizontal"],
  [data-orientation="vertical"],
  hr {
    transition: 
      background-color 200ms cubic-bezier(0.4, 0, 0.2, 1),
      border-color 200ms cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  /* Optimize avatar and image transitions */
  [class*="avatar"],
  img {
    transition: 
      opacity 200ms cubic-bezier(0.4, 0, 0.2, 1),
      filter 200ms cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  /* Optimize icon transitions */
  svg,
  [class*="icon"] {
    transition: 
      color 150ms cubic-bezier(0.4, 0, 0.2, 1),
      fill 150ms cubic-bezier(0.4, 0, 0.2, 1),
      stroke 150ms cubic-bezier(0.4, 0, 0.2, 1),
      transform 100ms cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  /* Reduce motion for users who prefer it */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
    
    .preload * {
      transition: none !important;
    }
  }
  
  /* High contrast mode optimizations */
  @media (prefers-contrast: high) {
    * {
      transition-duration: 100ms !important;
    }
  }
  
  /* Performance optimization for complex layouts */
  .complex-layout * {
    will-change: auto;
  }
  
  .complex-layout *:hover,
  .complex-layout *:focus,
  .complex-layout *:active {
    will-change: transform, opacity, background-color, color, border-color;
  }

  /* Accessibility-focused status and error styling */
  .error-message {
    color: var(--error-text);
    font-weight: 500;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  
  .success-message {
    color: var(--success-text);
    font-weight: 500;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  
  .warning-message {
    color: var(--warning-text);
    font-weight: 500;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  
  .info-message {
    color: var(--info-text);
    font-weight: 500;
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  
  /* ARIA live region styling */
  [aria-live="polite"],
  [aria-live="assertive"] {
    position: absolute;
    left: -10000px;
    width: 1px;
    height: 1px;
    overflow: hidden;
  }
  
  /* Status announcements that should be visible */
  .status-announcement {
    position: fixed;
    top: 1rem;
    right: 1rem;
    background: var(--card);
    border: 2px solid var(--border);
    border-radius: 0.5rem;
    padding: 1rem;
    box-shadow: var(--shadow-medium);
    z-index: 1000;
    max-width: 400px;
    animation: slideInFromRight 300ms cubic-bezier(0.4, 0, 0.2, 1);
  }
  
  @keyframes slideInFromRight {
    from {
      transform: translateX(100%);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }
  
  /* Enhanced form validation styling */
  input[aria-invalid="true"],
  textarea[aria-invalid="true"],
  select[aria-invalid="true"] {
    border-color: var(--error-text);
    box-shadow: 0 0 0 1px var(--error-text);
  }
  
  input[aria-invalid="true"]:focus-visible,
  textarea[aria-invalid="true"]:focus-visible,
  select[aria-invalid="true"]:focus-visible {
    outline-color: var(--error-text);
    box-shadow: 0 0 0 1px var(--background), 0 0 0 4px var(--error-text);
  }
  
  /* Required field indicators */
  .required-field::after {
    content: " *";
    color: var(--error-text);
    font-weight: bold;
  }
  
  /* Improved disabled state styling */
  button:disabled,
  [role="button"][aria-disabled="true"],
  input:disabled,
  textarea:disabled,
  select:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    background-color: var(--muted);
    color: var(--muted-foreground);
    border-color: var(--border-subtle);
  }
  
  /* Loading state accessibility */
  .loading {
    position: relative;
    pointer-events: none;
  }
  
  .loading::after {
    content: "";
    position: absolute;
    inset: 0;
    background: var(--background);
    opacity: 0.7;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  
  /* Improved tooltip accessibility */
  [role="tooltip"] {
    background: var(--popover);
    color: var(--popover-foreground);
    border: 1px solid var(--border);
    border-radius: 0.375rem;
    padding: 0.5rem 0.75rem;
    font-size: 0.875rem;
    font-weight: 500;
    box-shadow: var(--shadow-medium);
    z-index: 1000;
    max-width: 300px;
    word-wrap: break-word;
  }
  
  /* Enhanced table accessibility */
  table[role="table"] {
    border-collapse: separate;
    border-spacing: 0;
  }
  
  table[role="table"] th[role="columnheader"] {
    background: var(--muted);
    font-weight: 600;
    text-align: left;
    padding: 0.75rem 1rem;
    border-bottom: 2px solid var(--border);
    position: sticky;
    top: 0;
    z-index: 1;
  }
  
  table[role="table"] td[role="cell"] {
    padding: 0.75rem 1rem;
    border-bottom: 1px solid var(--border-subtle);
  }
  
  table[role="table"] tr:focus-within {
    background: var(--accent);
    outline: 2px solid var(--focus-ring);
    outline-offset: -2px;
  }
  
  /* Sortable column headers */
  th[role="columnheader"][aria-sort] {
    cursor: pointer;
    user-select: none;
  }
  
  th[role="columnheader"][aria-sort]:hover {
    background: var(--accent);
  }
  
  th[role="columnheader"][aria-sort]:focus-visible {
    outline: 3px solid var(--focus-ring);
    outline-offset: -3px;
  }
  
  /* Progress indicators */
  [role="progressbar"] {
    background: var(--muted);
    border-radius: 0.25rem;
    overflow: hidden;
    height: 0.5rem;
  }
  
  [role="progressbar"]::before {
    content: "";
    display: block;
    height: 100%;
    background: var(--primary);
    border-radius: inherit;
    transition: width 300ms cubic-bezier(0.4, 0, 0.2, 1);
    width: var(--progress-value, 0%);
  }
  
  /* Alert styling */
  [role="alert"] {
    padding: 1rem;
    border-radius: 0.5rem;
    border: 2px solid;
    font-weight: 500;
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
  }
  
  [role="alert"].error {
    background: oklch(from var(--error-text) l c h / 0.1);
    border-color: var(--error-text);
    color: var(--error-text);
  }
  
  [role="alert"].success {
    background: oklch(from var(--success-text) l c h / 0.1);
    border-color: var(--success-text);
    color: var(--success-text);
  }
  
  [role="alert"].warning {
    background: oklch(from var(--warning-text) l c h / 0.1);
    border-color: var(--warning-text);
    color: var(--warning-text);
  }
  
  [role="alert"].info {
    background: oklch(from var(--info-text) l c h / 0.1);
    border-color: var(--info-text);
    color: var(--info-text);
  }
  
  /* Enhanced breadcrumb navigation */
  [role="navigation"] ol[role="list"] {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    list-style: none;
    padding: 0;
    margin: 0;
  }
  
  [role="navigation"] ol[role="list"] li {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }
  
  [role="navigation"] ol[role="list"] li:not(:last-child)::after {
    content: "/";
    color: var(--muted-foreground);
    font-weight: 400;
  }
  
  [role="navigation"] ol[role="list"] a {
    color: var(--foreground);
    text-decoration: none;
    padding: 0.25rem 0.5rem;
    transition: background-color 100ms linear, color 100ms linear;
  }
  
  [role="navigation"] ol[role="list"] a:hover {
    background: var(--foreground);
    color: var(--background);
  }
  
  [role="navigation"] ol[role="list"] a:focus-visible {
    outline: 2px solid var(--focus-ring);
    outline-offset: 2px;
  }
  
  [role="navigation"] ol[role="list"] a[aria-current="page"] {
    color: var(--muted-foreground);
    cursor: default;
    pointer-events: none;
  }

@layer utilities {
  .texture-lines {
    background-image: var(--texture-lines);
    background-size: 100% 4px;
  }

  .texture-grid {
    background-image: var(--texture-grid);
    background-size: 40px 40px;
  }

  .texture-diagonal {
    background-image: var(--texture-diagonal);
  }

  .texture-vertical {
    background-image: var(--texture-vertical);
    background-size: 4px 100%;
  }

  .texture-radial {
    background-image: var(--texture-radial);
  }

  .texture-noise {
    background-image: var(--texture-noise);
    background-size: 256px 256px;
  }

  .texture-layered {
    background-image: var(--texture-lines), var(--texture-noise);
    background-size: 100% 4px, 256px 256px;
  }

  .rule-hairline {
    height: 1px;
    background-color: var(--border-light);
  }

  .rule-thin {
    height: 1px;
    background-color: var(--foreground);
  }

  .rule-thick {
    height: 4px;
    background-color: var(--foreground);
  }

  .rule-ultra {
    height: 8px;
    background-color: var(--foreground);
  }
}
